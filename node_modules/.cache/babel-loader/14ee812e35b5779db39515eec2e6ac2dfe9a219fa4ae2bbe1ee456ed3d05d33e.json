{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Select2 from 'vue3-select2-component';\nimport UserMixins from \"@/mixins/userMixins\";\nexport default {\n  mixins: [UserMixins],\n  components: {\n    Select2\n  },\n  data() {\n    return {};\n  },\n  created() {\n    this.user = this.$store.state.currentUser;\n    let userEntite = [];\n    let userRamification = [];\n    //userRamification = this.user.affectations.filter(item => item.ramification != null && item.enabled === true);\n\n    if (this.user.type.nom !== 'Super Admin') {\n      if (this.user.affectations.length > 0) {\n        this.user.affectations.forEach(item => {\n          if (item.enabled === true) {\n            if (item.entite !== null) {\n              userEntite = this.user.affectations.filter(item => item.entite != null && item.enabled === true);\n              this.fields.push({\n                colonne: 'ent.id',\n                operator: 'in',\n                value: userEntite.map(item => item.id),\n                connector: \"and\"\n              });\n            }\n            if (item.ramification !== null) {\n              userRamification = this.user.affectations.filter(item => item.ramification != null && item.enabled === true);\n              this.fields.push({\n                colonne: 'ent.id',\n                operator: 'in',\n                value: userRamification.map(item => item.entite.id),\n                connector: \"and\"\n              });\n            }\n          }\n        });\n      }\n    }\n\n    //  this.fields.push({colonne: 'ram.id', operator: 'in', value: userRamification.map(item=> item.id), connector: \"and\"})\n\n    this.api.listing(\"/type_ramifications\", this.fields, \"tram.ordre\", \"asc\", 1000, 1).then(response => {\n      this.typeRamifications = response.data;\n      this.typeRamifications.forEach(item => {\n        this.widTypeRamification.push({\n          id: item.id,\n          type: item.nom,\n          value: null\n        });\n      });\n    });\n    this.api.listing(\"/ramifications\", this.fields, \"tram.ordre\", \"asc\", 1000, 1).then(response => {\n      this.listRamifications = response.data;\n    });\n  }\n};","map":{"version":3,"names":["Select2","UserMixins","mixins","components","data","created","user","$store","state","currentUser","userEntite","userRamification","type","nom","affectations","length","forEach","item","enabled","entite","filter","fields","push","colonne","operator","value","map","id","connector","ramification","api","listing","then","response","typeRamifications","widTypeRamification","listRamifications"],"sources":["C:\\Users\\Sekou A Sidibe\\Documents\\NTA TECH\\projets\\klispay_backoffice\\v3\\src\\components\\FiltreRamification.vue"],"sourcesContent":["<template>\r\n  <b-row class=\"mb-4\">\r\n      <b-col v-for=\"(type, index) in widTypeRamification\" md=\"6\" xl=\"3\" :key=\"type\">\r\n          <Select2  :placeholder=\"type.type\"  v-model=\"widTypeRamification[index].value\" required :options=\"listRamifications.filter(item => item.type.id === widTypeRamification[index].id).map(ram => ({id: ram.id, text: ram.nom}))\"    />\r\n\r\n\r\n      </b-col>\r\n  </b-row>\r\n\r\n</template>\r\n<script>\r\nimport Select2 from 'vue3-select2-component';\r\nimport UserMixins from \"@/mixins/userMixins\"\r\n\r\n\r\nexport default {\r\n    mixins:[UserMixins],\r\n\r\n    components:{\r\n        Select2\r\n    },\r\n    data(){\r\n      return{\r\n\r\n      }\r\n    },\r\n\r\n    created() {\r\n        this.user = this.$store.state.currentUser;\r\n        let userEntite = [];\r\n        let userRamification = [];\r\n        //userRamification = this.user.affectations.filter(item => item.ramification != null && item.enabled === true);\r\n\r\n        if (this.user.type.nom !== 'Super Admin'){\r\n           if (this.user.affectations.length > 0){\r\n              this.user.affectations.forEach(item => {\r\n                  if(item.enabled === true){\r\n                      if (item.entite !== null){\r\n                          userEntite = this.user.affectations.filter(item => item.entite != null && item.enabled === true);\r\n                          this.fields.push({colonne: 'ent.id', operator: 'in', value: userEntite.map(item=> item.id), connector: \"and\"})\r\n                      }\r\n                      if (item.ramification !== null){\r\n                          userRamification = this.user.affectations.filter(item => item.ramification != null && item.enabled === true);\r\n                          this.fields.push({colonne: 'ent.id', operator: 'in', value: userRamification.map(item=> item.entite.id), connector: \"and\"})\r\n\r\n                      }\r\n                  }\r\n              })\r\n           }\r\n        }\r\n\r\n      //  this.fields.push({colonne: 'ram.id', operator: 'in', value: userRamification.map(item=> item.id), connector: \"and\"})\r\n\r\n        this.api.listing(\"/type_ramifications\", this.fields, \"tram.ordre\", \"asc\", 1000, 1 )\r\n            .then(response => {\r\n                this.typeRamifications = response.data;\r\n                this.typeRamifications.forEach(item => {\r\n                    this.widTypeRamification.push({id:item.id, type: item.nom, value: null })\r\n\r\n                })\r\n            })\r\n        this.api.listing(\"/ramifications\", this.fields, \"tram.ordre\", \"asc\", 1000, 1 )\r\n            .then(response => {\r\n                this.listRamifications = response.data;\r\n            })\r\n\r\n\r\n    }\r\n\r\n}\r\n</script>"],"mappings":";AAWA,OAAOA,OAAM,MAAO,wBAAwB;AAC5C,OAAOC,UAAS,MAAO,qBAAoB;AAG3C,eAAe;EACXC,MAAM,EAAC,CAACD,UAAU,CAAC;EAEnBE,UAAU,EAAC;IACPH;EACJ,CAAC;EACDI,IAAIA,CAAA,EAAE;IACJ,OAAM,CAEN;EACF,CAAC;EAEDC,OAAOA,CAAA,EAAG;IACN,IAAI,CAACC,IAAG,GAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,WAAW;IACzC,IAAIC,UAAS,GAAI,EAAE;IACnB,IAAIC,gBAAe,GAAI,EAAE;IACzB;;IAEA,IAAI,IAAI,CAACL,IAAI,CAACM,IAAI,CAACC,GAAE,KAAM,aAAa,EAAC;MACtC,IAAI,IAAI,CAACP,IAAI,CAACQ,YAAY,CAACC,MAAK,GAAI,CAAC,EAAC;QACnC,IAAI,CAACT,IAAI,CAACQ,YAAY,CAACE,OAAO,CAACC,IAAG,IAAK;UACnC,IAAGA,IAAI,CAACC,OAAM,KAAM,IAAI,EAAC;YACrB,IAAID,IAAI,CAACE,MAAK,KAAM,IAAI,EAAC;cACrBT,UAAS,GAAI,IAAI,CAACJ,IAAI,CAACQ,YAAY,CAACM,MAAM,CAACH,IAAG,IAAKA,IAAI,CAACE,MAAK,IAAK,IAAG,IAAKF,IAAI,CAACC,OAAM,KAAM,IAAI,CAAC;cAChG,IAAI,CAACG,MAAM,CAACC,IAAI,CAAC;gBAACC,OAAO,EAAE,QAAQ;gBAAEC,QAAQ,EAAE,IAAI;gBAAEC,KAAK,EAAEf,UAAU,CAACgB,GAAG,CAACT,IAAI,IAAGA,IAAI,CAACU,EAAE,CAAC;gBAAEC,SAAS,EAAE;cAAK,CAAC;YACjH;YACA,IAAIX,IAAI,CAACY,YAAW,KAAM,IAAI,EAAC;cAC3BlB,gBAAe,GAAI,IAAI,CAACL,IAAI,CAACQ,YAAY,CAACM,MAAM,CAACH,IAAG,IAAKA,IAAI,CAACY,YAAW,IAAK,IAAG,IAAKZ,IAAI,CAACC,OAAM,KAAM,IAAI,CAAC;cAC5G,IAAI,CAACG,MAAM,CAACC,IAAI,CAAC;gBAACC,OAAO,EAAE,QAAQ;gBAAEC,QAAQ,EAAE,IAAI;gBAAEC,KAAK,EAAEd,gBAAgB,CAACe,GAAG,CAACT,IAAI,IAAGA,IAAI,CAACE,MAAM,CAACQ,EAAE,CAAC;gBAAEC,SAAS,EAAE;cAAK,CAAC;YAE9H;UACJ;QACJ,CAAC;MACJ;IACH;;IAEF;;IAEE,IAAI,CAACE,GAAG,CAACC,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAACV,MAAM,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,EAAE,CAAE,EAC7EW,IAAI,CAACC,QAAO,IAAK;MACd,IAAI,CAACC,iBAAgB,GAAID,QAAQ,CAAC7B,IAAI;MACtC,IAAI,CAAC8B,iBAAiB,CAAClB,OAAO,CAACC,IAAG,IAAK;QACnC,IAAI,CAACkB,mBAAmB,CAACb,IAAI,CAAC;UAACK,EAAE,EAACV,IAAI,CAACU,EAAE;UAAEf,IAAI,EAAEK,IAAI,CAACJ,GAAG;UAAEY,KAAK,EAAE;QAAK,CAAC;MAE5E,CAAC;IACL,CAAC;IACL,IAAI,CAACK,GAAG,CAACC,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAACV,MAAM,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,EAAE,CAAE,EACxEW,IAAI,CAACC,QAAO,IAAK;MACd,IAAI,CAACG,iBAAgB,GAAIH,QAAQ,CAAC7B,IAAI;IAC1C,CAAC;EAGT;AAEJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}