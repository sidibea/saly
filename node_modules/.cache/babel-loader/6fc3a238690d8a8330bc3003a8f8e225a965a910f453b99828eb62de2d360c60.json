{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Api from \"../helpers/api\";\nexport default {\n  data() {\n    return {\n      api: new Api(),\n      user: null,\n      userAffectations: [],\n      userEntites: [],\n      userRamifications: [],\n      userPermissions: [],\n      typeRamifications: [],\n      widTypeRamification: [],\n      fields: []\n    };\n  },\n  methods: {\n    getUserAffaction() {\n      this.userAffectations = this.user.affectations;\n    },\n    getUserRamification() {\n      if (this.user.type.nom === 'Super Admin') {\n        this.api.listing(\"/ramifications\").then(response => {\n          response.data.forEach(item => {\n            this.userRamifications.push(item);\n          });\n        });\n      } else {\n        this.userAffectations.forEach(affectation => {\n          if (affectation.ramification !== null) {\n            this.api.get(\"/ramifications/\" + affectation.ramification.id + \"/childs\").then(response => {\n              response.data.forEach(item => {\n                this.userRamifications.push(item);\n              });\n            });\n          }\n        });\n      }\n    }\n  },\n  created() {\n    this.user = this.$store.state.currentUser;\n    if (this.user.type.nom === 'Super Admin') {\n      this.getUserAffaction();\n      this.getUserRamification();\n      this.fields.push({\n        colonne: 'tram.enabled',\n        operator: 'eq',\n        value: 1,\n        connector: \"and\"\n      });\n      this.api.listing(\"/type_ramifications\", this.fields, \"tram.ordre\", \"asc\", 1000, 1).then(response => {\n        this.typeRamifications = response.data;\n        this.typeRamifications.forEach(item => {\n          this.widTypeRamification.push({\n            id: item.id,\n            type: item.nom,\n            value: null\n          });\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["Api","data","api","user","userAffectations","userEntites","userRamifications","userPermissions","typeRamifications","widTypeRamification","fields","methods","getUserAffaction","affectations","getUserRamification","type","nom","listing","then","response","forEach","item","push","affectation","ramification","get","id","created","$store","state","currentUser","colonne","operator","value","connector"],"sources":["C:/Users/Sekou A Sidibe/Documents/NTA TECH/projets/klispay_backoffice/v3/src/mixins/userMixins.js"],"sourcesContent":["import Api from \"../helpers/api\";\r\n\r\nexport default {\r\n    data(){\r\n        return{\r\n            api: new Api(),\r\n            user: null,\r\n            userAffectations: [],\r\n            userEntites: [],\r\n            userRamifications: [],\r\n            userPermissions: [],\r\n            typeRamifications: [],\r\n            widTypeRamification: [],\r\n            fields: []\r\n        }\r\n\r\n    },\r\n    methods:{\r\n        getUserAffaction(){\r\n            this.userAffectations =  this.user.affectations\r\n        },\r\n        getUserRamification(){\r\n            if (this.user.type.nom === 'Super Admin'){\r\n                this.api.listing(\"/ramifications\")\r\n                    .then(response => {\r\n                        response.data.forEach(item => {\r\n                            this.userRamifications.push(item);\r\n                        })\r\n\r\n                    })\r\n            }else{\r\n                this.userAffectations.forEach(affectation => {\r\n                    if (affectation.ramification !== null){\r\n                        this.api.get(\"/ramifications/\"+affectation.ramification.id+\"/childs\")\r\n                            .then(response => {\r\n                                response.data.forEach(item => {\r\n                                    this.userRamifications.push(item);\r\n                                })\r\n\r\n                            })\r\n                    }\r\n\r\n                })\r\n            }\r\n\r\n\r\n        }\r\n\r\n    },\r\n    created() {\r\n        this.user = this.$store.state.currentUser;\r\n        if (this.user.type.nom === 'Super Admin'){\r\n            this.getUserAffaction();\r\n            this.getUserRamification();\r\n            this.fields.push({colonne: 'tram.enabled', operator: 'eq', value: 1, connector: \"and\"})\r\n\r\n            this.api.listing(\"/type_ramifications\", this.fields, \"tram.ordre\", \"asc\", 1000, 1 )\r\n                .then(response => {\r\n                    this.typeRamifications = response.data;\r\n                    this.typeRamifications.forEach(item => {\r\n                        this.widTypeRamification.push({id:item.id, type: item.nom, value: null })\r\n\r\n                    })\r\n                })\r\n        }\r\n\r\n    }\r\n}"],"mappings":";AAAA,OAAOA,GAAG,MAAM,gBAAgB;AAEhC,eAAe;EACXC,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,GAAG,EAAE,IAAIF,GAAG,CAAC,CAAC;MACdG,IAAI,EAAE,IAAI;MACVC,gBAAgB,EAAE,EAAE;MACpBC,WAAW,EAAE,EAAE;MACfC,iBAAiB,EAAE,EAAE;MACrBC,eAAe,EAAE,EAAE;MACnBC,iBAAiB,EAAE,EAAE;MACrBC,mBAAmB,EAAE,EAAE;MACvBC,MAAM,EAAE;IACZ,CAAC;EAEL,CAAC;EACDC,OAAO,EAAC;IACJC,gBAAgBA,CAAA,EAAE;MACd,IAAI,CAACR,gBAAgB,GAAI,IAAI,CAACD,IAAI,CAACU,YAAY;IACnD,CAAC;IACDC,mBAAmBA,CAAA,EAAE;MACjB,IAAI,IAAI,CAACX,IAAI,CAACY,IAAI,CAACC,GAAG,KAAK,aAAa,EAAC;QACrC,IAAI,CAACd,GAAG,CAACe,OAAO,CAAC,gBAAgB,CAAC,CAC7BC,IAAI,CAACC,QAAQ,IAAI;UACdA,QAAQ,CAAClB,IAAI,CAACmB,OAAO,CAACC,IAAI,IAAI;YAC1B,IAAI,CAACf,iBAAiB,CAACgB,IAAI,CAACD,IAAI,CAAC;UACrC,CAAC,CAAC;QAEN,CAAC,CAAC;MACV,CAAC,MAAI;QACD,IAAI,CAACjB,gBAAgB,CAACgB,OAAO,CAACG,WAAW,IAAI;UACzC,IAAIA,WAAW,CAACC,YAAY,KAAK,IAAI,EAAC;YAClC,IAAI,CAACtB,GAAG,CAACuB,GAAG,CAAC,iBAAiB,GAACF,WAAW,CAACC,YAAY,CAACE,EAAE,GAAC,SAAS,CAAC,CAChER,IAAI,CAACC,QAAQ,IAAI;cACdA,QAAQ,CAAClB,IAAI,CAACmB,OAAO,CAACC,IAAI,IAAI;gBAC1B,IAAI,CAACf,iBAAiB,CAACgB,IAAI,CAACD,IAAI,CAAC;cACrC,CAAC,CAAC;YAEN,CAAC,CAAC;UACV;QAEJ,CAAC,CAAC;MACN;IAGJ;EAEJ,CAAC;EACDM,OAAOA,CAAA,EAAG;IACN,IAAI,CAACxB,IAAI,GAAG,IAAI,CAACyB,MAAM,CAACC,KAAK,CAACC,WAAW;IACzC,IAAI,IAAI,CAAC3B,IAAI,CAACY,IAAI,CAACC,GAAG,KAAK,aAAa,EAAC;MACrC,IAAI,CAACJ,gBAAgB,CAAC,CAAC;MACvB,IAAI,CAACE,mBAAmB,CAAC,CAAC;MAC1B,IAAI,CAACJ,MAAM,CAACY,IAAI,CAAC;QAACS,OAAO,EAAE,cAAc;QAAEC,QAAQ,EAAE,IAAI;QAAEC,KAAK,EAAE,CAAC;QAAEC,SAAS,EAAE;MAAK,CAAC,CAAC;MAEvF,IAAI,CAAChC,GAAG,CAACe,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAACP,MAAM,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,EAAE,CAAE,CAAC,CAC9EQ,IAAI,CAACC,QAAQ,IAAI;QACd,IAAI,CAACX,iBAAiB,GAAGW,QAAQ,CAAClB,IAAI;QACtC,IAAI,CAACO,iBAAiB,CAACY,OAAO,CAACC,IAAI,IAAI;UACnC,IAAI,CAACZ,mBAAmB,CAACa,IAAI,CAAC;YAACI,EAAE,EAACL,IAAI,CAACK,EAAE;YAAEX,IAAI,EAAEM,IAAI,CAACL,GAAG;YAAEiB,KAAK,EAAE;UAAK,CAAC,CAAC;QAE7E,CAAC,CAAC;MACN,CAAC,CAAC;IACV;EAEJ;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}