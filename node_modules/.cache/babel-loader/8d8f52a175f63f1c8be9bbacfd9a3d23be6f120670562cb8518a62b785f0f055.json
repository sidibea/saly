{"ast":null,"code":"import { Autoplay, Mousewheel } from \"swiper/modules\";\nimport \"swiper/css\";\nimport \"swiper/css/autoplay\";\nimport \"swiper/css/mousewheel\";\nimport PageHeader from \"@/components/page-header\";\nimport UserMixins from \"@/mixins/userMixins\";\nimport mitt from 'mitt';\nimport Select2 from 'vue3-select2-component';\nimport Layout from \"@/layouts/main.vue\";\nexport default {\n  mixins: [UserMixins],\n  components: {\n    Layout,\n    PageHeader,\n    Select2\n  },\n  data() {\n    return {\n      selectedRamification: null,\n      childs: null,\n      title: this.$t('t-dashboards'),\n      dasboardStats: {\n        widget: {\n          \"emplacement\": 3,\n          \"contribuables\": 0,\n          \"equipements\": 0,\n          \"prevu\": 0,\n          \"payer\": 0\n        },\n        stats: []\n      },\n      items: [{\n        text: this.$t('t-dashboards'),\n        href: \"/\"\n      }],\n      Autoplay,\n      Mousewheel\n    };\n  },\n  methods: {\n    selectRamification(val) {\n      this.selectedRamification = val.id;\n      //console.log(this.userRamifications)\n      this.api.get(\"/ramifications/\" + this.selectedRamification + \"/childs\").then(ram => {\n        this.api.get(\"/statistics/dashboards/widgets/\" + this.user.id + \"?ramification=\" + this.selectedRamification + \"&childs=\" + ram.map(item => item.id)).then(response => {\n          console.log(response);\n          this.dasboardStats = response;\n        });\n      });\n    },\n    changeRamification(val) {\n      this.selectedRamification = val;\n    },\n    rightcolumn() {\n      if (document.querySelector('.layout-rightside-col').classList.contains('d-block')) {\n        document.querySelector('.layout-rightside-col').classList.remove('d-block');\n        document.querySelector('.layout-rightside-col').classList.add('d-none');\n      } else {\n        document.querySelector('.layout-rightside-col').classList.remove('d-none');\n        document.querySelector('.layout-rightside-col').classList.add('d-block');\n      }\n    },\n    resizerightcolumn() {\n      const element = document.querySelector('.layout-rightside-col');\n      if (element) {\n        if (window.outerWidth < 1699) {\n          element.classList.remove(\"d-block\");\n          element.classList.add(\"d-none\");\n        } else {\n          element.classList.add(\"d-block\");\n          element.classList.remove(\"d-none\");\n        }\n      }\n      if (document.documentElement.getAttribute(\"data-layout\") === \"semibox\") {\n        element.classList.remove(\"d-block\");\n        element.classList.add(\"d-none\");\n      }\n    },\n    updateDashboardStats(data) {\n      this.dasboardStats = data;\n    },\n    hiderightcolumn() {\n      const element = document.querySelector('.layout-rightside-col');\n      if (element.classList.contains('d-block')) {\n        element.classList.remove(\"d-block\");\n        element.classList.add(\"d-none\");\n      }\n    }\n  },\n  mounted() {\n    const emitter = mitt();\n    emitter.on('updateDashboardStats', data => {\n      console.log('Received event in the first component:', data);\n    });\n    window.addEventListener(\"resize\", this.resizerightcolumn);\n  },\n  created() {\n    this.title = this.$t('t-dashboards');\n    console.log(this.$store.state.dasboardStats);\n  }\n};","map":{"version":3,"names":["Autoplay","Mousewheel","PageHeader","UserMixins","mitt","Select2","Layout","mixins","components","data","selectedRamification","childs","title","$t","dasboardStats","widget","stats","items","text","href","methods","selectRamification","val","id","api","get","then","ram","user","map","item","response","console","log","changeRamification","rightcolumn","document","querySelector","classList","contains","remove","add","resizerightcolumn","element","window","outerWidth","documentElement","getAttribute","updateDashboardStats","hiderightcolumn","mounted","emitter","on","addEventListener","created","$store","state"],"sources":["C:\\Users\\Sekou A Sidibe\\Documents\\NTA TECH\\projets\\klispay_backoffice\\v3\\src\\views\\dashboard\\simple\\index.vue"],"sourcesContent":["<script>\n\n\nimport { Autoplay, Mousewheel } from \"swiper/modules\";\nimport \"swiper/css\";\nimport \"swiper/css/autoplay\";\nimport \"swiper/css/mousewheel\";\nimport PageHeader from \"@/components/page-header\";\nimport UserMixins from \"@/mixins/userMixins\"\nimport mitt from 'mitt';\n\nimport Select2 from 'vue3-select2-component';\nimport Layout from \"@/layouts/main.vue\";\n\nexport default {\n    mixins:[UserMixins],\n\n  components: {\n    Layout,\n      PageHeader,\n      Select2\n  },\n  data() {\n    return {\n        selectedRamification: null,\n        childs: null,\n      title: this.$t('t-dashboards'),\n        dasboardStats: {\n            widget: {\n                \"emplacement\": 3,\n                \"contribuables\": 0,\n                \"equipements\": 0,\n                \"prevu\": 0,\n                \"payer\": 0\n            },\n            stats: []\n        },\n      items: [{\n        text: this.$t('t-dashboards'),\n        href: \"/\",\n      },\n\n      ],\n      Autoplay, Mousewheel\n    };\n  },\n  methods: {\n      selectRamification(val){\n          this.selectedRamification = val.id;\n          //console.log(this.userRamifications)\n          this.api.get(\"/ramifications/\"+this.selectedRamification+\"/childs\")\n              .then(ram => {\n\n                  this.api.get(\"/statistics/dashboards/widgets/\"+this.user.id+\"?ramification=\"+this.selectedRamification+\"&childs=\"+ram.map(item => item.id))\n                      .then(response => {\n                          console.log(response)\n                          this.dasboardStats = response;\n                      })\n              })\n\n\n\n      },\n      changeRamification(val){\n          this.selectedRamification = val;\n      },\n    rightcolumn() {\n      if (document.querySelector('.layout-rightside-col').classList.contains('d-block')) {\n        document.querySelector('.layout-rightside-col').classList.remove('d-block');\n        document.querySelector('.layout-rightside-col').classList.add('d-none');\n      } else {\n        document.querySelector('.layout-rightside-col').classList.remove('d-none');\n        document.querySelector('.layout-rightside-col').classList.add('d-block');\n      }\n    },\n\n    resizerightcolumn() {\n      const element = document.querySelector('.layout-rightside-col');\n\n      if (element) {\n        if (window.outerWidth < 1699) {\n          element.classList.remove(\"d-block\");\n          element.classList.add(\"d-none\");\n        } else {\n          element.classList.add(\"d-block\");\n          element.classList.remove(\"d-none\");\n        }\n      }\n\n      if (document.documentElement.getAttribute(\"data-layout\") === \"semibox\") {\n        element.classList.remove(\"d-block\");\n        element.classList.add(\"d-none\");\n      }\n    },\n      updateDashboardStats(data){\n        this.dasboardStats = data\n\n      },\n\n    hiderightcolumn() {\n      const element = document.querySelector('.layout-rightside-col');\n      if (element.classList.contains('d-block')) {\n        element.classList.remove(\"d-block\");\n        element.classList.add(\"d-none\");\n      }\n    }\n  },\n  mounted() {\n      const emitter = mitt();\n      emitter.on('updateDashboardStats', (data) => {\n          console.log('Received event in the first component:', data);\n      });\n    window.addEventListener(\"resize\", this.resizerightcolumn);\n  },\n  created() {\n      this.title = this.$t('t-dashboards')\n       console.log(this.$store.state.dasboardStats) ;\n\n  }\n\n};\n</script>\n\n<template>\n  <Layout>\n      <PageHeader :title=\"title\" :items=\"items\" />\n      <b-row class=\"mb-4\">\n          <b-col v-for=\"(type, index) in widTypeRamification\" md=\"6\" xl=\"3\" :key=\"type\">\n              <Select2 @select=\"selectRamification($event)\" @change=\"changeRamification($event)\"  :placeholder=\"type.type\"  v-model=\"widTypeRamification[index].value\" required :options=\"userRamifications.filter(item => item.type.id === widTypeRamification[index].id).map(ram => ({id: ram.id, text: ram.nom}))\"    />\n\n\n          </b-col>\n      </b-row>\n\n\n    <b-row>\n      <b-col>\n        <div class=\"h-100\">\n            <b-row>\n                <b-col md=\"4\" xl=\"4\">\n                    <b-card class=\"card-animate\">\n                        <b-card-body>\n                            <div class=\"d-flex align-items-center\">\n                                <div class=\"flex-grow-1 overflow-hidden\">\n                                    <p class=\"text-uppercase fw-medium text-muted text-truncate mb-0\"> {{$t('t-contribuables')}} </p>\n                                </div>\n\n                            </div>\n                            <div class=\"d-flex align-items-end justify-content-between mt-4\">\n                                <div>\n                                    <h4 class=\"fs-22 fw-semibold ff-secondary mb-4\"> <span>{{dasboardStats.widget.contribuables}}</span>  </h4>\n                                    <a class=\"text-decoration-underline text-muted\" href=\"#\">{{$t('t-details')}}</a>\n                                </div>\n                                <div class=\"avatar-sm flex-shrink-0\">\n                                    <span class=\"avatar-title bg-success-subtle rounded fs-3\">\n                                        <i class=\"bx bx-user text-success\"></i>\n                                    </span>\n                                </div>\n                            </div>\n                        </b-card-body>\n\n                    </b-card>\n                </b-col>\n                <b-col md=\"4\" xl=\"4\">\n                    <b-card class=\"card-animate\">\n                        <b-card-body>\n                            <div class=\"d-flex align-items-center\">\n                                <div class=\"flex-grow-1 overflow-hidden\">\n                                    <p class=\"text-uppercase fw-medium text-muted text-truncate mb-0\"> {{$t('t-equipements')}} </p>\n                                </div>\n\n                            </div>\n                            <div class=\"d-flex align-items-end justify-content-between mt-4\">\n                                <div>\n                                    <h4 class=\"fs-22 fw-semibold ff-secondary mb-4\"> <span>{{dasboardStats.widget.equipements}}</span> </h4>\n                                    <a class=\"text-decoration-underline text-muted\" href=\"#\">{{$t('t-details')}}</a>\n                                </div>\n                                <div class=\"avatar-sm flex-shrink-0\">\n                                    <span class=\"avatar-title bg-success-subtle rounded fs-3\">\n                                        <i class=\"bx bx-home text-success\"></i>\n                                    </span>\n                                </div>\n                            </div>\n                        </b-card-body>\n\n                    </b-card>\n                </b-col>\n                <b-col md=\"4\" xl=\"4\">\n                    <b-card class=\"card-animate bg-warning\">\n                        <b-card-body>\n                            <div class=\"d-flex align-items-center\">\n                                <div class=\"flex-grow-1 overflow-hidden\">\n                                    <p class=\"text-uppercase fw-medium  text-truncate mb-0\"> {{$t('t-assiette')}} </p>\n                                </div>\n\n                            </div>\n                            <div class=\"d-flex align-items-end justify-content-between mt-4\">\n                                <div>\n                                    <h4 class=\"fs-22 fw-semibold ff-secondary mb-4\"> <span>{{dasboardStats.widget.prevu}}</span> </h4>\n                                    <a class=\"text-decoration-underline \" href=\"#\">{{$t('t-details')}}</a>\n                                </div>\n                                <div class=\"avatar-sm flex-shrink-0\">\n                                    <span class=\"avatar-title bg-success-subtle rounded fs-3\">\n                                        <i class=\"bx bx-money text-success\"></i>\n                                    </span>\n                                </div>\n                            </div>\n                        </b-card-body>\n\n                    </b-card>\n                </b-col>\n                <b-col md=\"6\" xl=\"6\">\n                    <b-card class=\"card-animate bg-success\">\n                        <b-card-body>\n                            <div class=\"d-flex align-items-center\">\n                                <div class=\"flex-grow-1 overflow-hidden\">\n                                    <p class=\"text-uppercase fw-medium text-white text-truncate mb-0\"> {{$t('t-montant-payer')}} </p>\n                                </div>\n\n                            </div>\n                            <div class=\"d-flex align-items-end justify-content-between mt-4\">\n                                <div>\n                                    <h4 class=\"fs-22 fw-semibold ff-secondary mb-4 text-white\"> <span>{{dasboardStats.widget.payer}}</span> </h4>\n                                    <a class=\"text-decoration-underline text-white\" href=\"#\">{{$t('t-details')}}</a>\n                                </div>\n                                <div class=\"avatar-sm flex-shrink-0\">\n                                    <span class=\"avatar-title bg-success-subtle rounded fs-3\">\n                                        <i class=\"bx bx-money text-success\"></i>\n                                    </span>\n                                </div>\n                            </div>\n                        </b-card-body>\n\n                    </b-card>\n                </b-col>\n                <b-col md=\"6\" xl=\"6\">\n                    <b-card class=\"card-animate bg-danger\">\n                        <b-card-body>\n                            <div class=\"d-flex align-items-center\">\n                                <div class=\"flex-grow-1 overflow-hidden\">\n                                    <p class=\"text-uppercase fw-medium text-white text-truncate mb-0\"> {{$t('t-montant-restant')}} </p>\n                                </div>\n\n                            </div>\n                            <div class=\"d-flex align-items-end justify-content-between mt-4\">\n                                <div>\n                                    <h4 class=\"fs-22 fw-semibold ff-secondary mb-4 text-white\"> <span>{{ dasboardStats.widget.prevu - dasboardStats.widget.payer }}</span>  </h4>\n                                    <a class=\"text-decoration-underline text-white\" href=\"#\">{{$t('t-details')}}</a>\n                                </div>\n                                <div class=\"avatar-sm flex-shrink-0\">\n                                    <span class=\"avatar-title bg-success-subtle rounded fs-3\">\n                                        <i class=\"bx bx-money text-success\"></i>\n                                    </span>\n                                </div>\n                            </div>\n                        </b-card-body>\n\n                    </b-card>\n                </b-col>\n            </b-row>\n            <b-row>\n                <b-col md=\"12\" xl=\"12\">\n                    <b-card>\n                        <b-card-header>\n                            <b-card-title>Recapitulatif</b-card-title>\n                        </b-card-header>\n                        <b-card-body>\n                            <table class=\"table text-uppercase  table-bordered text-start text-center bg-success text-white\">\n                                <thead>\n                                    <th>Emplacement</th>\n                                    <th>Enrôlement</th>\n                                    <th>Montant prévu</th>\n                                    <th>Montant payé</th>\n                                    <th>Montant restant</th>\n                                </thead>\n                                <tbody>\n                                <tr v-for=\"data in dasboardStats.stats\" :key=\"data\">\n                                    <td>{{formattedNumber(data.emplacement)}}</td>\n                                    <td>{{formattedNumber(data.contribuables)}}</td>\n                                    <td>{{formattedNumber(data.prevu)}}</td>\n                                    <td>{{formattedNumber(data.payer)}}</td>\n                                    <td>{{formattedNumber(data.restant)}}</td>\n                                </tr>\n\n                                </tbody>\n                                <tfoot>\n                                    <tr>\n                                        <th>TOTAL</th>\n                                        <th></th>\n                                        <th></th>\n                                        <th></th>\n                                        <th></th>\n                                    </tr>\n                                </tfoot>\n                            </table>\n                        </b-card-body>\n                    </b-card>\n                </b-col>\n            </b-row>\n        </div>\n      </b-col>\n\n    </b-row>\n  </Layout>\n</template>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}