{"ast":null,"code":"import Select2 from 'vue3-select2-component';\nimport UserMixins from \"../mixins/userMixins\";\nimport Api from \"../helpers/api\";\nimport mitt from 'mitt';\nexport default {\n  mixins: [UserMixins],\n  components: {\n    Select2\n  },\n  data() {\n    return {\n      api: new Api(),\n      selectedRamification: null,\n      childs: null\n    };\n  },\n  methods: {\n    selectRamification(val) {\n      this.selectedRamification = val.id;\n      //console.log(this.userRamifications)\n      this.api.get(\"/ramifications/\" + this.selectedRamification + \"/childs\").then(ram => {\n        this.api.get(\"/statistics/dashboards/widgets/\" + this.user.id + \"?ramification=\" + this.selectedRamification + \"&childs=\" + ram.map(item => item.id)).then(response => {\n          console.log(response);\n          localStorage.setItem('dasboardStats', JSON.stringify(response));\n          this.$store.dispatch(\"dasboardStats\", response);\n          const emitter = mitt();\n          this.$emit('updateDashboardStats', response);\n        });\n      });\n    },\n    changeRamification(val) {\n      this.selectedRamification = val;\n    }\n  },\n  created() {}\n};","map":{"version":3,"names":["Select2","UserMixins","Api","mitt","mixins","components","data","api","selectedRamification","childs","methods","selectRamification","val","id","get","then","ram","user","map","item","response","console","log","localStorage","setItem","JSON","stringify","$store","dispatch","emitter","$emit","changeRamification","created"],"sources":["C:\\Users\\Sekou A Sidibe\\Documents\\NTA TECH\\projets\\klispay_backoffice\\v3\\src\\components\\FiltreRamification.vue"],"sourcesContent":["<template>\r\n  <b-row class=\"mb-4\">\r\n      <b-col v-for=\"(type, index) in widTypeRamification\" md=\"6\" xl=\"3\" :key=\"type\">\r\n          <Select2 @select=\"selectRamification($event)\" @change=\"changeRamification($event)\"  :placeholder=\"type.type\"  v-model=\"widTypeRamification[index].value\" required :options=\"userRamifications.filter(item => item.type.id === widTypeRamification[index].id).map(ram => ({id: ram.id, text: ram.nom}))\"    />\r\n\r\n\r\n      </b-col>\r\n  </b-row>\r\n\r\n</template>\r\n<script>\r\nimport Select2 from 'vue3-select2-component';\r\nimport UserMixins from \"../mixins/userMixins\"\r\nimport Api from \"../helpers/api\";\r\nimport mitt from 'mitt';\r\n\r\nexport default {\r\n    mixins:[UserMixins],\r\n\r\n    components:{\r\n        Select2\r\n    },\r\n    data(){\r\n      return{\r\n          api: new Api(),\r\n          selectedRamification: null,\r\n          childs: null\r\n\r\n      }\r\n    },\r\n    methods:{\r\n        selectRamification(val){\r\n            this.selectedRamification = val.id;\r\n            //console.log(this.userRamifications)\r\n            this.api.get(\"/ramifications/\"+this.selectedRamification+\"/childs\")\r\n                .then(ram => {\r\n\r\n                    this.api.get(\"/statistics/dashboards/widgets/\"+this.user.id+\"?ramification=\"+this.selectedRamification+\"&childs=\"+ram.map(item => item.id))\r\n                        .then(response => {\r\n                            console.log(response)\r\n                            localStorage.setItem('dasboardStats', JSON.stringify(response));\r\n                            this.$store.dispatch(\"dasboardStats\", response);\r\n                            const emitter = mitt();\r\n                            this.$emit('updateDashboardStats', response);\r\n                        })\r\n                })\r\n\r\n\r\n\r\n        },\r\n        changeRamification(val){\r\n            this.selectedRamification = val;\r\n        },\r\n    },\r\n\r\n    created() {\r\n\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n}\r\n</script>"],"mappings":"AAWA,OAAOA,OAAM,MAAO,wBAAwB;AAC5C,OAAOC,UAAS,MAAO,sBAAqB;AAC5C,OAAOC,GAAE,MAAO,gBAAgB;AAChC,OAAOC,IAAG,MAAO,MAAM;AAEvB,eAAe;EACXC,MAAM,EAAC,CAACH,UAAU,CAAC;EAEnBI,UAAU,EAAC;IACPL;EACJ,CAAC;EACDM,IAAIA,CAAA,EAAE;IACJ,OAAM;MACFC,GAAG,EAAE,IAAIL,GAAG,CAAC,CAAC;MACdM,oBAAoB,EAAE,IAAI;MAC1BC,MAAM,EAAE;IAEZ;EACF,CAAC;EACDC,OAAO,EAAC;IACJC,kBAAkBA,CAACC,GAAG,EAAC;MACnB,IAAI,CAACJ,oBAAmB,GAAII,GAAG,CAACC,EAAE;MAClC;MACA,IAAI,CAACN,GAAG,CAACO,GAAG,CAAC,iBAAiB,GAAC,IAAI,CAACN,oBAAoB,GAAC,SAAS,EAC7DO,IAAI,CAACC,GAAE,IAAK;QAET,IAAI,CAACT,GAAG,CAACO,GAAG,CAAC,iCAAiC,GAAC,IAAI,CAACG,IAAI,CAACJ,EAAE,GAAC,gBAAgB,GAAC,IAAI,CAACL,oBAAoB,GAAC,UAAU,GAACQ,GAAG,CAACE,GAAG,CAACC,IAAG,IAAKA,IAAI,CAACN,EAAE,CAAC,EACrIE,IAAI,CAACK,QAAO,IAAK;UACdC,OAAO,CAACC,GAAG,CAACF,QAAQ;UACpBG,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEC,IAAI,CAACC,SAAS,CAACN,QAAQ,CAAC,CAAC;UAC/D,IAAI,CAACO,MAAM,CAACC,QAAQ,CAAC,eAAe,EAAER,QAAQ,CAAC;UAC/C,MAAMS,OAAM,GAAI1B,IAAI,CAAC,CAAC;UACtB,IAAI,CAAC2B,KAAK,CAAC,sBAAsB,EAAEV,QAAQ,CAAC;QAChD,CAAC;MACT,CAAC;IAIT,CAAC;IACDW,kBAAkBA,CAACnB,GAAG,EAAC;MACnB,IAAI,CAACJ,oBAAmB,GAAII,GAAG;IACnC;EACJ,CAAC;EAEDoB,OAAOA,CAAA,EAAG,CAOV;AAEJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}